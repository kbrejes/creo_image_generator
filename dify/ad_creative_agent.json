{
  "app": {
    "name": "Ad Creative Agent",
    "description": "Auto-generates ad creatives with 4 visual formats (meme, text_only, split, stickers)",
    "mode": "workflow",
    "icon": "ðŸŽ¨",
    "icon_background": "#FFEAD5"
  },
  "workflow": {
    "graph": {
      "nodes": [
        {
          "id": "start",
          "position": { "x": 80, "y": 282 },
          "type": "start",
          "data": {
            "title": "Start",
            "variables": [
              {
                "label": "Ad Request",
                "variable": "query",
                "type": "paragraph",
                "required": true,
                "max_length": 1000
              },
              {
                "label": "Visual Format",
                "variable": "format_type",
                "type": "select",
                "required": true,
                "default": "meme",
                "options": [
                  { "value": "meme", "label": "Meme Style (text over image)" },
                  { "value": "text_only", "label": "Text Only (white background)" },
                  { "value": "split", "label": "Split Screen (photo left, text right)" },
                  { "value": "stickers", "label": "Text + Stickers" }
                ]
              },
              {
                "label": "CTA Style",
                "variable": "cta_style",
                "type": "select",
                "required": false,
                "default": "text",
                "options": [
                  { "value": "text", "label": "Text" },
                  { "value": "button", "label": "Button (rounded rectangle)" }
                ]
              },
              {
                "label": "Right Side Color (for split)",
                "variable": "right_bg_color",
                "type": "text-input",
                "required": false,
                "default": "white"
              }
            ]
          }
        },
        {
          "id": "analyze_brief",
          "position": { "x": 380, "y": 282 },
          "type": "llm",
          "data": {
            "title": "Analyze Brief",
            "model": {
              "provider": "openai",
              "name": "gpt-4-turbo",
              "mode": "chat",
              "completion_params": {}
            },
            "prompt_template": [
              {
                "role": "system",
                "text": "You are an expert Creative Director. Analyze the user's request.\n\nUser selected format: {{#start.format_type#}}\nUser selected CTA style: {{#start.cta_style#}}\n\nExtract:\n1. Product Name\n2. Target Audience\n3. Visual Style\n4. Platform (use: instagram_square, instagram_story, instagram_reels, tiktok, facebook_feed, twitter, youtube_shorts)\n5. Number of variations (default: 3)\n\nOutput ONLY valid JSON:\n{\n  \"product\": \"...\",\n  \"audience\": \"...\",\n  \"style\": \"...\",\n  \"platform\": \"instagram_square\",\n  \"num_variations\": 3,\n  \"text_color\": \"white\",\n  \"prompt\": \"Detailed image generation prompt...\",\n  \"negative_prompt\": \"text, bad quality, blurry\",\n  \"safe_zone\": \"auto\"\n}"
              },
              {
                "role": "user",
                "text": "{{#start.query#}}"
              }
            ]
          }
        },
        {
          "id": "generate_copy",
          "position": { "x": 680, "y": 282 },
          "type": "llm",
          "data": {
            "title": "Generate Copy",
            "model": {
              "provider": "openai",
              "name": "gpt-4-turbo",
              "mode": "chat",
              "completion_params": {}
            },
            "prompt_template": [
              {
                "role": "system",
                "text": "Generate ad copy variations based on this brief.\n\nBrief: {{#analyze_brief.text#}}\n\nOutput ONLY valid JSON array:\n[\n  {\"hook\": \"Punchy Hook 1\", \"body\": \"Short body text\", \"cta\": \"Shop Now\"},\n  {\"hook\": \"Punchy Hook 2\", \"body\": \"Short body text\", \"cta\": \"Learn More\"}\n]\n\nGenerate exactly the number of variations requested."
              }
            ]
          }
        },
        {
          "id": "generate_image_http",
          "position": { "x": 980, "y": 282 },
          "type": "http-request",
          "data": {
            "title": "Generate Base Image",
            "method": "post",
            "url": "https://creo.yourads.io/tools/generate-image",
            "headers": "Content-Type: application/json",
            "body": {
              "type": "json",
              "data": "{\n  \"prompt\": \"{{#analyze_brief.json.prompt#}}\",\n  \"backend\": \"flux\",\n  \"size\": \"1024x1024\",\n  \"num_images\": 1\n}"
            },
            "timeout": {
              "connect": 10,
              "read": 120,
              "write": 10
            }
          }
        },
        {
          "id": "batch_compose_http",
          "position": { "x": 1280, "y": 282 },
          "type": "http-request",
          "data": {
            "title": "Batch Compose",
            "method": "post",
            "url": "https://creo.yourads.io/tools/compose-batch",
            "headers": "Content-Type: application/json",
            "params": "image_url={{#generate_image_http.body.images[0].url#}}&variations_json={{#generate_copy.text#}}&output_size={{#analyze_brief.json.platform#}}&text_color={{#analyze_brief.json.text_color#}}&format_type={{#start.format_type#}}&cta_style={{#start.cta_style#}}&right_bg_color={{#start.right_bg_color#}}&safe_zone={{#analyze_brief.json.safe_zone#}}",
            "body": {
              "type": "none"
            },
            "timeout": {
              "connect": 10,
              "read": 120,
              "write": 10
            }
          }
        },
        {
          "id": "answer",
          "position": { "x": 1580, "y": 282 },
          "type": "end",
          "data": {
            "title": "End",
            "outputs": [
              {
                "variable": "final_result",
                "value_selector": ["batch_compose_http", "body"]
              }
            ]
          }
        }
      ],
      "edges": [
        { "source": "start", "target": "analyze_brief" },
        { "source": "analyze_brief", "target": "generate_copy" },
        { "source": "generate_copy", "target": "generate_image_http" },
        { "source": "generate_image_http", "target": "batch_compose_http" },
        { "source": "batch_compose_http", "target": "answer" }
      ]
    }
  }
}
